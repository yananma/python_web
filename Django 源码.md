
一遍一遍过，一遍学几个知识点，一遍学几个知识点。东西就这么多，三年时间肯定能吃透。    

前一年半所有的早上和周末，三年所有的早上。（2022.08.01 - 2025.08.01） 

看十几二十遍视频就能熟练掌握，多容易，多简单。   

第一遍视频就是熟悉目录    

第二遍和第三遍视频一起看，每个视频看两遍。熟悉函数和类的名称    

第四遍，弄明白代码的逻辑    

第五遍，就是跟着手动敲代码，敲书上的例子，或者是小函数，或者是一行代码，或者是类等等    

再之后就是敲代码的时候，自己改动，创造，融会贯通      

同时熟悉了类名函数名之后，要看已有的测试的例子，学一个函数看一个测试，学习测试的用法    


### 具体源码内容

Django 自己有一个简单的开发环境的 server，通过 `python manage.py runserver`启动  
源码在 django/core/management/commands/runserver.py 中  
在 django/core/servers/basehttp.py 最后的 run 方法中实现了 httpd.serve_forever()  
本质上是 TCP，源码在 django/Lib/socketserver.py 中  
`python manage.py runserver` 可以自动刷新，不需要重启服务器，是通过线程实现的，源码在 django/utils/autoreload.py 中  
一直刷新的 log 日志信息的实现在 django/core/servers/basehttp.py 的 WSGIRequestHandler 的 log_message() 方法中   
HTTP 请求和响应报文，都是在 django/Lib/http/server.py 中实现的  

django 最开始的欢迎页面在 django/views/templates/default_urlconf.html  

makemigrations 命令，源码会通过 os.mkdir() 创建 migrations 文件夹，生成 \_\_init__.py 文件，写文件。写详细文件在 django/db/migrations/writers.py 中  


Mixin 是组件的意思  


### 问题  

1. 自己的命令是怎么运行的
2. 


### 要学的内容   

Django 源码会成为自己的素材库，以后可以直接从源码里 copy 函数出来用。     

Django 源码会成为自己今后几十年的练习的程序。   

前两遍主要要学的就是熟悉目录结构，熟悉文件所在的位置。   

1. 学习命名   
    * 重复 duplicates，django\apps\registry.py `duplicates = [name for name, count in counts.most_common() if count > 1]`   
    * 不带文件名的叫 dir，带文件名的叫 path    

2. 学习标准库函数用法 
**标准库很多是有源码的，读源码，学习标准库的用法**      
    * exec()
    * traceback.print_exc()    
    * 标准库 code 模块、rlcompleter、    
    * os.environ.get("PYTHONSTARTUP"),     
    * os.path.expanduser("~/.pythonrc.py")    

5. 学习错误处理  
6. 学习函数调用  
7. 学习类的使用   
8. 学习代码组织方法    
9. 学习强内聚性和松耦合性   



### 学到的好的东西   

**代码**    
1. `seen_apps.setdefault(app_label, set()).add(migration_name)`   django/db/migrations/loader.py    
2. 


**非代码**  
1. django 命令，不加命令名的时候，打印 help    
2. 所有的命令都可以加 \-\-settings 参数   
3. 自己在 python 里可以启动 ipython   
4. makemigrations 可以跟 app_label(最开始学 django 的时候就好奇的一个问题)   
5. 



### 实际中的帮助   

1. 2022.07.30 解决了长期困扰自己的 settings 和 app load 的报错。   
2. 2022.08.01 pycharm 的 shell 没有办法重启，自己在测试上创建 shell，知道所有的命令都可以配置 \-\-settings，如鱼得水   
3. 2022.08.02 代码补全是可以自己实现的
4. 


为了啃下 40 多万字的飞船飞行操作手册，他几乎夜里 12 点前没有睡过觉，在模拟仓里一待就是七八个小时，反复读仪表、按旋钮、操作仪器，开着灯练熟了，他就把灯关了摸着黑练，练到所有的动作成为肌肉记忆。    

王国栋对学生们有一个要求：“不学千家会，只求一招绝。”     

可以带动学习 Python 文档。    

既可以学 Python，实现 Python 进阶，又可以学 Django，了解框架原理。     

自己以后也可以实现复杂的功能。   

难以遏制的好奇心，想了解原理。   

会源码就不用记了，比如 Django REST framework 的方法很多，会了源码，万变不离其宗，直接看源码就行了，所有的东西都在源码里。    

而且即使当时记住了，过一段时间肯定也忘了，有源码就不会有这个问题   

### 一劳永逸解决看书看视频问题。读源码就不用读各种书了看各种视频了，不用再纠结于哪本书好哪个视频好了，源码是根基，源码就是最好的书，最好的课。书读多了，视频看多了，越来越乱  

一劳永逸解决报错问题，比搜索看各种乱七八糟的文章好几百倍，可以节省大量的时间。   

想要提高，需要看更高层次的代码，需要跳出平时的工作，需要学习优秀的开源项目。    

为以后开发大型项目做准备。    

自己学习的感受就是，学会源码再看视频看书，就是一览众山小的感觉，学习起来如同秋风扫落叶，势如破竹。很长的项目课程，一天就能学完，而且 100% 吸收理解，清清楚楚  

最重要的是通过阅读 Django 源码，有了阅读源码的能力，可以读所有的 Python 框架和包，比如 flask、Django REST framework、SQLAlchemy、Redis 等等  

# 源码面前，了无秘密。  

最重要的原因就是读文档记不住，比如 Django REST framework，学了多少遍，还是一点儿都记不住，读源码一次就记住了。  

源码就像武功秘籍，虽然有时难懂如天书；可一旦参透，便掌握绝世武功的奥妙！  

研读、分析源代码乃是提高编程技能的一条捷径，庖丁解牛方能游刃有余，夯实基础方可构建高楼大厦。  

其实作为初学者或只是使用者，你的确不必了解这么多细节的内容，但是探究事物的原理，分析底层细节却也是许多人成为高手的原因，因为你知道别人不知道的东西，掌握了别人不了解的技术，这些内容使得你的见解、分析，甚至作品都可能超过别人。  

他从源码的角度讲述了 Python 的一些规则，使得大家的理解不再停留在形式上或规则上，而达到了本质或实现的层次，让我们“知其然，更知其所以然”。  

从对有些问题的回复中，Robert Chen 总是从源码及字节码实现的角度来回答问题，非常有说服力。  

通过阅读 asyncore 的源代码排除了一个痛苦 bug，轻松地找到了问题的根源。  

提高自己的代码性能和功能；  
快速地与文档结合，解决问题或是找出方法；  

Python 程序员当然能从这本书得到最多的收获，在这本书里，你能找到 Python 所有魔法的最终来源，每一个看似神奇的特性都会得到一个最朴素的解释，每一个所谓的高级特性，比如 decorator，都会变成你手中平凡的工具。当然，你还会对你编写的 Python 代码有一个最透彻的认识。  

当最终完成对 Python 的剖析之后，我发现对于 Python 代码，可以有一种洞彻肺腑的感觉。看着代码，在脑海里就完全可以出现虚拟机在后台如何运作的情景，这种感觉非常棒。  

作为一个优秀的开源项目，通过阅读它的源码，C 程序员可以从中汲取世界上最优秀的 C 程序员的经验。  

大量的工程师浩浩荡荡加入 Python 大军，竞争日益激烈。如果你想要从众人中脱颖而出，就必须拿出自己的看家本领。  

## 源码就是最好的文档，读一遍源码好过读一百本书。读源码乐趣无穷。

源码是贯穿始终反复使用的，永远都会用到，极为重要  

读源码会是自己的核心竞争力，因为这个是最最根基的东西，最核心，最根本，非常重要，而且很辛苦，几乎不会有人会这么做，这反而成了自己的特长了  

以后是要靠这个进入好公司的  

对工作，对理解业务，对查找错误，对提高自己的编程能力，都极其有帮助  

阅读源码可以对代码逻辑运行流程了如指掌；不读源码，只读文档，不了解底层原理，出现错误就无从下手；  
阅读源码可以自己进行定制开发  

自己感兴趣的项目、工作中涉及的项目、有助于提升个人能力的，可以作为参考的优秀项目  

要带着问题读、一定要记笔记、要有好的开发工具，用 PyCharm  



##### 平时阅读  

报错的时候，是学习源码最好的时机，顺藤摸瓜，挨个打开看一看上下文语境  
import 的时候，可以看一看用到的文件，可以看整篇 .py 文件  
用到的某一个函数，想要了解，可以 Ctrl 跳转到源码  
报错的时候 import pysnooper  

读源码核心在 try 里面，不是在 except 里面  

熟悉了以后还是应该 debug，多 debug 几遍就好了  



